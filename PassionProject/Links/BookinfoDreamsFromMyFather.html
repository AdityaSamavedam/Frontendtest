<!DOCTYPE html>
<html>
<head>
    <style>
        /* Aesthetic styling for the title */
        h1 {
            text-align: center;
            font-size: 24px;
            color: #333;
        }
        /* Style for the background */
        #background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('https://images.penguinrandomhouse.com/cover/9780307383419');
            background-size: 100% 100%; /* Fit the image to cover the entire element */
            background-repeat: no-repeat;
            opacity: 0.5; /* Adjust the opacity as needed */
            z-index: -1; /* Place it behind other content */
        }
        /* Style for the passage container */
        #passageContainer {
            position: relative;
            z-index: 1; /* Place it in front of the background */
        }
    </style>
</head>
<body>
    <div id="background"></div> <!-- Background with the image -->
    <h1>Book Information</h1> <!-- Added title -->
    <div id="bookTable"></div> <!-- Container for book data -->

    <form>
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" placeholder="Enter your name"><br><br>

        <label for "address">Address:</label> <!-- Fixed the label syntax -->
        <input type="text" id="address" name="address" placeholder="Enter your address"><br><br>

        <label for="creditCard">Credit Card Number:</label>
        <input type="text" id="creditCard" name="creditCard" placeholder="Enter your credit card number"><br><br>

        <input type="submit" value="Submit">
    </form>

    <button id="passageGeneratorButton">Click to read a passage from the book</button>
    <div id="passageContainer"></div> <!-- Container for passage text -->

    <script>
        // Function to fetch and display book data
        function fetchBookData(title) {
            const url = `http://127.0.0.1:8762/api/book/?title=${title}`; // Update the API endpoint with the specific title
            fetch(url)
                .then(response => response.json())
                .then(data => {
                    const bookTable = document.getElementById("bookTable");
                    bookTable.innerHTML = ""; // Clear previous data

                    if (data.length === 0) {
                        bookTable.textContent = "No books found.";
                    } else {
                        // Check if the returned data corresponds to "Dreams From My Father"
                        if (data[1].author === "Barack Obama" && data[1].year === "1995") {
                            const table = document.createElement("table");
                            table.border = "1";

                            // Create table headers based on book properties
                            const headerRow = document.createElement("tr");
                            ['author', 'year', 'price', 'genre', 'summary'].forEach(key => {
                                const th = document.createElement("th");
                                th.textContent = key.charAt(0).toUpperCase() + key.slice(1);
                                headerRow.appendChild(th);
                            });
                            table.appendChild(headerRow);

                            // Populate the table with book data
                            const row = document.createElement("tr");
                            ['author', 'year', 'price', 'genre', 'summary'].forEach(key => {
                                const cell = document.createElement("td");
                                cell.textContent = data[1][key];
                                row.appendChild(cell);
                            });
                            table.appendChild(row);

                            bookTable.appendChild(table);
                        } else {
                            bookTable.textContent = "No books found.";
                        }
                    }
                })
                .catch(error => {
                    console.error("Error:", error);
                });
        }

        // Function to generate the provided text and display it in the passage container
        function generatePassage() {
            const passage = "I looked at Miss Baker, wondering what it was she 'got done.' " +
                "I enjoyed looking at her. She was a slender, small-breasted girl, " +
                "with an erect carriage, which she accentuated by throwing her body backward at the shoulders like a young cadet. " +
                "Her gray sun-strained eyes looked back at me with polite reciprocal curiosity " +
                "out of a wan, charming, discontented face. It occurred to me now that I had seen her, " +
                "or a picture of her, somewhere before.";

            // Display the generated passage in the passage container
            document.getElementById("passageContainer").textContent = passage;
        }

        // Fetch data for "Dreams From My Father" initially when the page loads
        fetchBookData("DreamsFromMyFather");

        // Add a click event listener to the "Click to read a passage from the book" button
        document.getElementById("passageGeneratorButton").addEventListener("click", generatePassage);
    </script>
</body>
</html>
