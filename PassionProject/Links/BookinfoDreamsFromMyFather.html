<!DOCTYPE html>
<html>
<head>
    <style>
        /* Aesthetic styling for the title */
        h1 {
            text-align: center;
            font-size: 24px;
            color: #333;
        }
        /* Style for the background */
        #background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('https://images.penguinrandomhouse.com/cover/9780307383419');
            background-size: cover; /* Fit the image to cover the entire element */
            background-repeat: no-repeat;
            background-attachment: fixed;
            opacity: 0.5; /* Adjust the opacity as needed */
            z-index: -1; /* Place it behind other content */
        }
        /* Style for the passage container */
        #passageContainer {
            position: relative;
            z-index: 1; /* Place it in front of the background */
        }
    </style>
</head>
<body>
    <div id="background"></div> <!-- Background with the image -->
    <h1>Book Information</h1> <!-- Added title -->
    <div id="bookTable"></div> <!-- Container for book data -->

    <form>
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" placeholder="Enter your name"><br><br>

        <label for="address">Address:</label>
        <input type="text" id="address" name="address" placeholder="Enter your address"><br><br>

        <label for "creditCard">Credit Card Number:</label>
        <input type="text" id="creditCard" name="creditCard" placeholder="Enter your credit card number"><br><br>

        <input type="submit" value="Submit">
    </form>

    <button id="passageGeneratorButton">Click to read a passage from the book</button>
    <div id="passageContainer"></div> <!-- Container for passage text -->

    <script>
        // Function to fetch and display book data
        function fetchBookData(title) {
            const url = `http://127.0.0.1:8794/api/book/?title=${title}`; // Update the API endpoint with the specific title
            fetch(url)
                .then(response => response.json())
                .then(data => {
                    const bookTable = document.getElementById("bookTable");
                    bookTable.innerHTML = ""; // Clear previous data

                    if (data.length === 0) {
                        bookTable.textContent = "No books found.";
                    } else {
                        // Check if the returned data corresponds to "Dreams From My Father"
                        if (data[1].author === "Barack Obama" && data[1].year === "1995") {
                            const table = document.createElement("table");
                            table.border = "1";

                            // Create table headers based on book properties
                            const headerRow = document.createElement("tr");
                            ['author', 'year', 'price', 'genre', 'summary'].forEach(key => {
                                const th = document.createElement("th");
                                th.textContent = key.charAt(0).toUpperCase() + key.slice(1);
                                headerRow.appendChild(th);
                            });
                            table.appendChild(headerRow);

                            // Populate the table with book data
                            const row = document.createElement("tr");
                            ['author', 'year', 'price', 'genre', 'summary'].forEach(key => {
                                const cell = document.createElement("td");
                                cell.textContent = data[1][key];
                                row.appendChild(cell);
                            });
                            table.appendChild(row);

                            bookTable.appendChild(table);
                        } else {
                            bookTable.textContent = "No books found.";
                        }
                    }
                })
                .catch(error => {
                    console.error("Error:", error);
                });
        }

        // Function to generate the provided text and display it in the passage container
        function generatePassage() {
            const passage = "I don’t fault people their suspicions. I learned long ago to distrust my childhood and the stories that shaped it. It was only many years later, after I had sat at my father’s grave and spoken to him through Africa’s red soil, that I could circle back and evaluate these early stories for myself. Or, more accurately, it was only then that I understood that I had spent much of my life trying to rewrite these stories, plugging up holes in the narrative, accommodating unwelcome details, projecting individual choices against the blind sweep of history, all in the hope of extracting some granite slab of truth upon which my unborn children can firmly stand. ";

            // Display the generated passage in the passage container
            document.getElementById("passageContainer").textContent = passage;
        }

        // Fetch data for "Dreams From My Father" initially when the page loads
        fetchBookData("DreamsFromMyFather");

        // Add a click event listener to the "Click to read a passage from the book" button
        document.getElementById("passageGeneratorButton").addEventListener("click", generatePassage);
    </script>
</body>
</html>
